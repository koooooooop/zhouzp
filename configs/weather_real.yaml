# Weather çœŸå®æ•°æ®é›†é…ç½®
# åŸºäºå®é™…çš„ weather.csv æ–‡ä»¶

data:
  dataset_name: "weather"
  data_path: "m2moep/dataset/weather/weather.csv"  # ğŸ”§ ä¿®æ­£è·¯å¾„ï¼ˆç›¸å¯¹äºé¡¹ç›®æ ¹ç›®å½•ï¼‰
  seq_len: 96
  pred_len: 24
  features: "M"  # multivariate
  target: "OT"
  # è®­ç»ƒæ•°æ®é…ç½®
  train_ratio: 0.7
  val_ratio: 0.2
  test_ratio: 0.1
  # æ•°æ®åŠ è½½é…ç½®
  batch_size: 8             # ä¿å®ˆçš„æ‰¹æ¬¡å¤§å°
  num_workers: 2
  pin_memory: true
  # æ•°æ®å¤„ç†é…ç½®
  scaler_type: "standard"
  normalize: true
  inverse: false
  standardize: true
  
model:
  model_name: "M2_MOEP"
  
  # åŸºç¡€æ¨¡å‹å‚æ•° - ä¿å®ˆè®¾ç½®ï¼ˆWeatheræ•°æ®é€šå¸¸21ä¸ªç‰¹å¾ï¼‰
  input_dim: 21             # Weatheræ•°æ®é›†ç‰¹å¾æ•°
  output_dim: 21
  hidden_dim: 64
  seq_len: 96
  pred_len: 24
  
  # ä¸“å®¶ç³»ç»Ÿå‚æ•°
  num_experts: 4
  top_k: 2
  embedding_dim: 128
  
  # ä¸“å®¶ç½‘ç»œå‚æ•°
  expert_params:
    mamba_d_model: 64
    mamba_scales: [1, 2, 4]
    
  # æ¸©åº¦è°ƒåº¦å‚æ•°
  temperature:
    initial: 5.0
    min: 1.0
    max: 10.0
    decay_rate: 0.95
    
  # Flowæ¨¡å‹å‚æ•°
  flow:
    num_layers: 4
    hidden_dim: 128
    latent_dim: 256
    input_dim: 504        
    use_pretrained: true
    
training:
  # åŸºç¡€è®­ç»ƒå‚æ•°
  batch_size: 8
  learning_rate: 0.0001
  epochs: 50
  
  # ä¼˜åŒ–å™¨å‚æ•°
  optimizer: "adamw"
  weight_decay: 0.01
  beta1: 0.9
  beta2: 0.999
  eps: 1e-8
  
  # å­¦ä¹ ç‡è°ƒåº¦
  scheduler: "cosine"
  lr_min: 1e-6
  warmup_epochs: 5
  
  # æ¢¯åº¦æ§åˆ¶
  gradient_clip: 1.0        # ğŸ”§ æ”¾å®½æ¢¯åº¦è£å‰ªé˜ˆå€¼
  use_amp: false
  
  # æŸå¤±å‡½æ•°æƒé‡
  loss_weights:
    prediction: 1.0
    reconstruction: 0.1
    triplet: 0.05
  
  # è®­ç»ƒç­–ç•¥
  use_reconstruction_loss: true
  use_triplet_loss: true
  
  # ä¸‰å…ƒç»„æŸå¤±å‚æ•°
  triplet_margin: 0.2
  triplet_mining: "batch_hard"
  
  # éªŒè¯å’Œä¿å­˜è®¾ç½®
  val_check_interval: 1
  save_top_k: 3
  
  # æ—©åœè®¾ç½®
  early_stopping:
    patience: 10
    min_delta: 0.001
    
  # æ•°å€¼ç¨³å®šæ€§è®¾ç½®
  numerical_stability:
    loss_clamp_max: 10.0
    grad_norm_threshold: 1.0
    nan_detection: true
    
# è¾“å‡ºè®¾ç½®
output:
  save_dir: "checkpoints"
  log_dir: "logs"
  result_dir: "results"
  
# è®¾å¤‡è®¾ç½®
device: "cuda"
seed: 42

# è°ƒè¯•è®¾ç½®
debug:
  log_gradients: true
  check_numerical: true
  profile_memory: false
  
# å®éªŒè®¾ç½®
experiment:
  name: "weather_real_data"
  description: "Weatheræ•°æ®é›†çœŸå®æ•°æ®è®­ç»ƒ"
  tags: ["weather", "real_data", "multivariate"] 